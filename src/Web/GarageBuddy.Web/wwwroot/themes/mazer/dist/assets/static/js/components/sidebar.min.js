/**
 * Minified by jsDelivr using Terser v5.19.0.
 * Original file: /npm/@charescape/mazer-fork-ost@2.1.4141/dist/assets/static/js/components/sidebar.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import isDesktop from"../helper/isDesktop";const calculateChildrenHeight=(e,t=!1)=>{const i=e.children;let s=0;for(let n=0;n<e.childElementCount;n++){const e=i[n];if(s+=e.querySelector(".submenu-link").clientHeight,t&&e.classList.contains("has-sub")){const t=e.querySelector(".submenu");if(t.classList.contains("submenu-open")){s+=~~[...t.querySelectorAll(".submenu-link")].reduce(((e,t)=>e+t.clientHeight),0)}}}return e.style.setProperty("--submenu-height",s+"px"),s};class Sidebar{constructor(e,t={}){this.sidebarEL=e instanceof HTMLElement?e:document.querySelector(e),this.options=t,this.init()}init(){document.querySelectorAll(".burger-btn").forEach((e=>e.addEventListener("click",this.toggle.bind(this)))),document.querySelectorAll(".sidebar-hide").forEach((e=>e.addEventListener("click",this.toggle.bind(this)))),window.addEventListener("resize",this.onResize.bind(this));const e=e=>{e.classList.contains("submenu-open")?(e.classList.remove("submenu-open"),e.classList.add("submenu-closed")):(e.classList.remove("submenu-closed"),e.classList.add("submenu-open"))};let t=document.querySelectorAll(".sidebar-item.has-sub");for(var i=0;i<t.length;i++){let s=t[i];t[i].querySelector(".sidebar-link").addEventListener("click",(t=>{t.preventDefault();let i=s.querySelector(".submenu");e(i)}));s.querySelectorAll(".submenu-item.has-sub").forEach((t=>{t.addEventListener("click",(()=>{const i=t.querySelector(".submenu");e(i);calculateChildrenHeight(t.parentElement,!0)}))}))}if("function"==typeof PerfectScrollbar){const e=document.querySelector(".sidebar-wrapper");new PerfectScrollbar(e,{wheelPropagation:!1})}setTimeout((()=>{this.forceElementVisibility(document.querySelector(".sidebar-item.active"))}),300)}onResize(){isDesktop(window)?this.sidebarEL.classList.add("active"):this.sidebarEL.classList.remove("active"),this.deleteBackdrop(),this.toggleOverflowBody(!0)}toggle(){this.sidebarEL.classList.contains("active")?this.hide():this.show()}show(){this.sidebarEL.classList.add("active"),this.sidebarEL.classList.remove("inactive"),this.createBackdrop(),this.toggleOverflowBody()}hide(){this.sidebarEL.classList.remove("active"),this.sidebarEL.classList.add("inactive"),this.deleteBackdrop(),this.toggleOverflowBody()}createBackdrop(){if(isDesktop(window))return;this.deleteBackdrop();const e=document.createElement("div");e.classList.add("sidebar-backdrop"),e.addEventListener("click",this.hide.bind(this)),document.body.appendChild(e)}deleteBackdrop(){const e=document.querySelector(".sidebar-backdrop");e&&e.remove()}toggleOverflowBody(e){if(isDesktop(window))return;const t=this.sidebarEL.classList.contains("active"),i=document.querySelector("body");i.style.overflowY=void 0===e?t?"hidden":"auto":e?"auto":"hidden"}isElementInViewport(e){var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}forceElementVisibility(e){this.isElementInViewport(e)||e.scrollIntoView(!1)}}let sidebarEl=document.getElementById("sidebar");const onFirstLoad=e=>{if(!sidebarEl)return;isDesktop(window)&&(e.classList.add("active"),e.classList.add("sidebar-desktop"));let t=document.querySelectorAll(".sidebar-item.has-sub .submenu");for(var i=0;i<t.length;i++){let e=t[i];const s=e.parentElement;e.clientHeight;s.classList.contains("active")?e.classList.add("submenu-open"):e.classList.add("submenu-closed"),setTimeout((()=>{calculateChildrenHeight(e,!0)}),50)}};"loading"!==document.readyState?onFirstLoad(sidebarEl):window.addEventListener("DOMContentLoaded",(()=>onFirstLoad(sidebarEl))),sidebarEl&&(window.sidebar=new Sidebar(sidebarEl));
//# sourceMappingURL=/sm/e041da98b18bc378ffc9e5a22aee4c5925da0eaa2a0b778abd84005b6328650e.map